# Distribute Key Generation experiments
This is a source code for the paper: Practical Distributed Key Generation Using Two-Round Secret Sharing.


This repository comprises:

**1. Smart contract**
- The smart contract can be deployed to the blockchain. Before deployment, the zk-SNARK verification keys inside the smart contract should be changed to the zk-SNARK keys generated by the HLDS programs.

**2. zk-SNARK HLDS programs in Zokrates**
- Generate zk-SNARK keypair: (the verification keys should be embedded to the smart contract)
```
zokrates compile -i <name>.zok
zokrates set -s gm17
```
- Generate proof:
```
zokrates compute-witness -a <inputs of name.zok>
zokrates generate-proof -s gm17
zokrates print-proof --format remix
```
- The output is the proof string $\pi$ and public input/output ($\vec{v},\vec{o}$). They can be passed directly to the smart contract functions \texttt{verifyC1}, \texttt{verifyC2}, etc.
- 
**3. Two-Round secret sharing (TSS)**
- tss.py generated using the library: https://github.com/Zokrates/pycrypto.
- Parameters or the threshold number in tss.py can be modified. By default, the threshold is $t=9$ and $n=16$.
- tss.py generate (1) public parameter set, (2) function $\mathsf{ComX^{TSS}}$ for $n$ parties, (3) Function $\mathsf{GenY^{TSS}}$ for $n$ parties, and (4) function $\mathsf{Rec^{TSS}}$ using $t$ shares.
- To test TSS functions:
```
python3 DKGTSS/tss.py
```
**4. Proof strings**

VerifyC1
```
[["0x1e3634e6019dde78cd21b82dbd28e67de63259cac6bc557ca8c805d5630534cb","0x2cdf35a1310420cbd6190bab58769a8a0492372ba43795f03cbff0662ee68d76"], [["0x21eec88c51c29d02606275ccd62ac237d5e80b7945dd4f823224f36e90b7c3f1","0x069de826d31e885a736b2c7a9f4f8c68a6e2b0c00e26166b7289d4313e1feb94"],["0x0e2148c861f3942b52a895133c222a2ed0a4bcef613e1d4bfb3bb574ae895e89","0x0b93a1af09ddb9939b6e57e60936351b4b5d7f72639f3141f2a03e55315e25f8"]], ["0x124800559a819d500959718e4c9dc4d9494f0ca090b6ea09c9341989dd0bb47c","0x176a6f758aabeb267666973cf67f57a9034c007fb30c6e3c1b3e2c0d886ababf"]],["0x2fdc0bfa0a4a37827e2cfc94189b86412477e705eb38b9a278463b54b67cbb52","0x2650f77fe06be946458707dec01d4b47dc4db8dc2ff3acc8a2385a0e38af1839","0x04d556b6d5ec8772ec75d1783700e5ceb753236d720f2fa275fff6510f1368af","0x0351911e698e53bda8e8bfcb2f0b51175b805180df1f8e8caafb79486131b61a"]
```
VerifyC2
```
[["0x1dd268c56ebba986b568e8a792687786e534c9f8870837ed56fd8414423517a2","0x29fa4d72da5dae0e9a32c9b83a84bb210f2c4ab06a1ff45691449f38154d7aa4"], [["0x1deaca71d557a2a194ba6ef59c93b9e555e7a1df9de58a69af4585232e3665d7","0x1944027456220f888942143f93abe8467b2b06696f3b994f112de1c37fbe5faa"],["0x27de42f63bd9f296c216b0650997f677b6806c626659ef3895733a091e36ef63","0x08d91c9f8348f0b290d9c28bf4dbe197ef5655727581ef79099dacc5cf4dc3cd"]], ["0x060a57c9121bdf47a7ac230f3404b50831c5e1ff7e5fda7d379dd36c8ea737bb","0x03d119b6ba266f30e87e1e430050189f05ba10fce2be239928986f98c373c5fd"]],["0x277cc0a1e311f77e92c28711031c7294fd03740e8418e31e5ca783be972a2a02","0x0f47e147ad0289d42e2517f26e53971872cdb1bba817870c9a98bbd9879c6677","0x2963dfbfe733b64af22b662e6ab5aa19e25143b638f245b5a1cd88b2b7234691","0x02d1b554ec8016cae0c347b459e219bae73ed45d736859ec265b18a178e8894b"]
```
SubmitSk
```
[["0x07ed9355e54387c627a7b3caacf93ce95ac97ac6487e203117a4218665efc752","0x2b6a6a1d407967a3d33a87c9fd422ec13bcf45b0e87259d0a1eed87126bf0aac"], [["0x23de982c121c4ed6580aecb8f10489e9c1d88d6b302f27271a18226b2d1569d5","0x169fc12a7b7daf5e3e8a59b9108006f543034b7b5c71536edc1d6d3bd430a49e"],["0x1225973d08fdcf26cb516cf8110b8f0ef59fb53cfdc6e74d3c754037f132e649","0x0cc2f70e255f1c6c925dac2e37147f601ee35e22c42537a18f9a75f002e8fe2d"]], ["0x2200d407850fc0c8dd5fa469243fe6bdffd5b471145c8dd3cfe6b15a5bbd1bc2","0x1fcdea20d47ee70d6d9f5b6bfa4d77b4b5348ec9e5e824e86b7b26a64f16ab17"]],["0x20153f365b84c9e9c9027ef0b5b9a0b25ae5e2a7ea166f216f319b85224b0ef8","0x277cc0a1e311f77e92c28711031c7294fd03740e8418e31e5ca783be972a2a02","0x0f47e147ad0289d42e2517f26e53971872cdb1bba817870c9a98bbd9879c6677"]
```
SubmitX
```
[["0x10f8b59cb607fdf0ee4c3f9fdaa5ae18499c9804590a809b79a07ddb46220299","0x0acf28be69fbcab8d07103a5dd268037e4478ce58a295e691b5b819b619aa00d"], [["0x25adc3929ce5de193d86e6f65dcb2947c36b211fa12e3e0ecc40050b70adaf16","0x257be89eccad4d0f118f3f56a0f6d5f7ec26994a7f360c85f0515e7b558148b4"],["0x100dfb667b3069c00470bfc69c3865a1e57f1874e12ffb082b99f1c56350d64f","0x0ed162a415834db0c224550ef0fedda37da2734ac89de785ae4b72a2af12b85a"]], ["0x1781e45184c06db6b79e0f8825a1bc9fa2a0089b9eef29f57d05470816e91b0f","0x2f0f22d008abe4781255a263463cf27d0ff1bcd5340398306edc031a6a45d564"]],["0x0000000000000000000000000000000000000000000000000000000000a98e3a","0x04d556b6d5ec8772ec75d1783700e5ceb753236d720f2fa275fff6510f1368af","0x0351911e698e53bda8e8bfcb2f0b51175b805180df1f8e8caafb79486131b61a"]
```
